// Generated by LiveScript 1.2.0
var px, dim, margin, pos, setup, draw, mousePressed;
px = 8;
dim = px * 48;
margin = px * 2;
pos = 0;
setup = function(){
  createCanvas(dim + margin, dim + margin);
  noStroke();
};
draw = function(){
  var algo, i$, step$, to$, x, j$, step1$, to1$, y, r, s, offset;
  clear();
  algo = function(max){
    var sX, sY, sZ;
    sX = cos(pos * 0.02) * 60;
    sY = sin(pos * 0.02) * 60;
    sZ = lerp(20, 10, abs(sin(pos * 0.0025)));
    return max / 2 + (max / 2) * sin(sqrt((x + sX - dim / 2.0) * (x + sX - dim / 2.0) + (y + sY - dim / 2.0) * (y + sY - dim / 2.0)) / sZ);
  };
  for (i$ = 0, to$ = dim, step$ = px; step$ < 0 ? i$ >= to$ : i$ <= to$; i$ += step$) {
    x = i$;
    for (j$ = 0, to1$ = dim, step1$ = px; step1$ < 0 ? j$ >= to1$ : j$ <= to1$; j$ += step1$) {
      y = j$;
      r = algo(256);
      s = algo(px - 2) + 3;
      offset = (px - s) / 2;
      fill(r, 0, 200);
      rect(x - offset + margin / 2, y - offset + margin / 2, s, s);
    }
  }
  pos++;
};
mousePressed = function(){
  noLoop();
};
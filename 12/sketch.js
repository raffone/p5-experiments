// Generated by LiveScript 1.2.0
var canvasWidth, canvasHeight, vortexMult, drawCircle, drawPixel, colorRange, colorRGB, colorInc, colorStepCurr, colorStepCount, colorSteps, incrementColor, setup, draw, keyPressed, mousePressed;
canvasWidth = 320;
canvasHeight = 200;
vortexMult = 0;
drawCircle = function(x0, y0, radius, color, opacity){
  var x, y, radiusError;
  x = radius;
  y = 0;
  radiusError = 1 - x;
  while (x >= y) {
    drawPixel(x + x0, y + y0, color, opacity);
    drawPixel(y + x0, x + y0, color, opacity);
    drawPixel(-x + x0, y + y0, color, opacity);
    drawPixel(-y + x0, x + y0, color, opacity);
    drawPixel(-x + x0, -y + y0, color, opacity);
    drawPixel(-y + x0, -x + y0, color, opacity);
    drawPixel(x + x0, -y + y0, color, opacity);
    drawPixel(y + x0, -x + y0, color, opacity);
    y++;
    if (radiusError < 0) {
      radiusError += 2 * y + 1;
    } else {
      x--;
      radiusError += 2 * (y - x + 1);
    }
  }
};
drawPixel = function(x, y, color, opacity){
  if (x >= 0 && y >= 0 && x <= canvasWidth && y <= canvasHeight) {
    x = x * 4;
    y = (y * canvasWidth) * 4;
    opacity = colorRange - opacity;
    pixels[x + y] = color[0] - opacity;
    pixels[x + y + 1] = color[1] - opacity;
    pixels[x + y + 2] = color[2] - opacity;
  }
};
colorRange = 255;
colorRGB = [colorRange, 0, 0];
colorInc = 4.90;
colorStepCurr = 0;
colorStepCount = 0;
colorSteps = [[0, colorInc, 0], [-colorInc, 0, 0], [0, 0, colorInc], [0, -colorInc, 0], [colorInc, 0, 0], [0, 0, -colorInc]];
incrementColor = function(){
  var i$, to$, i;
  for (i$ = 0, to$ = colorRGB.length; i$ < to$; ++i$) {
    i = i$;
    colorRGB[i] = colorRGB[i] + colorSteps[colorStepCurr][i];
  }
  colorStepCount += colorInc;
  if (colorStepCount >= 256) {
    colorStepCount = 0;
    colorStepCurr += 1;
  }
  if (colorStepCurr === colorSteps.length) {
    colorStepCurr = 0;
  }
};
setup = function(){
  createCanvas(canvasWidth, canvasHeight);
};
draw = function(){
  var inc, i$, to$, i, vort, centerX, centerY, opacity;
  background(0);
  loadPixels();
  inc = colorRange / canvasWidth;
  for (i$ = 0, to$ = canvasWidth; i$ < to$; ++i$) {
    i = i$;
    incrementColor();
    vort = i * (0.10 + 0.06 * sin(vortexMult * 0.005));
    centerX = canvasWidth * 0.5 + floor(80 * cos(vort));
    centerY = canvasHeight * 0.5 + floor(80 * sin(vort));
    opacity = max(0, i * inc - max(0, floor(width / 2 - i)));
    drawCircle(centerX, centerY, i, colorRGB, opacity);
  }
  vortexMult++;
  updatePixels();
};
keyPressed = mousePressed = function(){
  return noLoop();
};